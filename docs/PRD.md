# 月更志（MOGENGZHI）— iOS App 第一版构思与产品文档（PRD）

> **产品名**：月更志（MOGENGZHI）
>
> **一句话**：把你的生活/工作当成软件在迭代——每月一个“版本”，用“目标 + 待办 + 完成 + 复盘 + 导出”的方式，离线管理与回顾。
>
> **平台与约束**：仅 iOS；不依赖任何自建服务端；默认完全离线本地数据；不做账号体系；不做云端协作。

---

## 1. 背景与愿景

很多人能写 TODO，但难以长期坚持“规划→执行→复盘”。软件工程里“版本迭代 / Release Notes / Retrospective”非常成熟，把这套结构迁移到个人管理，会天然形成节律：

- 每月：定主题、立目标、维护 Backlog
- 日常：快速收集 Inbox，推进任务
- 月末：生成“本月 Release Notes”（可分享图片/PDF），形成正反馈与沉淀

**核心愿景**：让用户在 3 分钟内完成“本月版本规划”，在 10 秒内完成日常收集，在 5 分钟内完成月末复盘并导出。

---

## 2. 目标用户

- 喜欢用“工程化方式”管理生活/工作的人（产品/工程/管理者/自我管理爱好者）
- 想要轻量、无需注册、隐私优先、离线可用的记录工具
- 每月希望有一张“我这个月做了什么”的总结图/文档的人

---

## 3. 核心概念与术语

- **版本（Release）**：一个自然月（例如 2026-02）的一次迭代容器
- **条目（Item）**：最小工作单元，可是任务/想法/事件/改进点
- **Inbox**：快速收集箱，稍后再归档到某个月版本
- **Release Notes**：该月完成清单 + 亮点 + 数据概览 + 复盘要点（可导出）

---

## 4. MVP（v1.0）范围

### 4.1 必做功能（MVP）

1. **月度版本管理**

   - 自动生成当月版本（首次打开即创建）
   - 支持切换历史月份（列表/日历式选择）
   - 每月包含：主题（可选）、目标（3~5 个）、Backlog、Done、复盘

2. **Inbox 快速收集**

   - 一个输入框 + 可选标签（工作/生活/健康/学习…）
   - 一键“稍后处理”进入 Inbox
   - 从 Inbox 选择条目 → 归档到某个月（默认当月）并指定状态（Backlog / Done）

3. **条目状态流转**

   - Backlog ↔ Doing（可选，v1 可不做 Doing）↔ Done
   - Done 条目支持填写“亮点/备注”（一句话即可）
   - 支持拖拽排序（Backlog 优先级）

4. **月末复盘页**

   - 统计：完成数量、Top 标签、连续记录天数（简单即可）
   - 复盘模板（固定 4 问）：
     - 本月做对了什么？
     - 哪些没做好？为什么？
     - 下月要继续/停止/开始什么？
     - 一句话总结本月版本

5. **导出（分享）**

   - 导出“Release Notes”：
     - **图片**（长图，适合朋友圈/群分享）
     - **PDF**（可打印/存档）
   - 导出内容：主题、目标、Done 列表、亮点、复盘要点、统计概览

6. **本地存储与备份**

   - 默认本地数据库（SwiftData / CoreData）
   - 支持“导出备份文件”（.json 或自定义 .vnotes）到系统文件 App
   - 支持“从备份恢复”（覆盖或合并，v1 建议先做覆盖，减少复杂度）

7. **隐私与权限**

   - 默认不需要任何系统权限
   - 不接入三方统计 SDK
   - 所有数据仅存本地（设置页明确说明）

---

## 5. 非目标（v1 不做）

- 多端同步、账号登录、多人协作
- 自然语言 AI 总结（因为不能依赖服务端；本地大模型也不作为 v1 依赖）
- 日历深度整合、自动抓取邮件/消息
- 复杂的 GTD/看板/甘特图（保持维护简单）

---

## 6. 关键使用流程（User Journey）

### 6.1 首次打开（30 秒完成上手）

1. 选择使用偏好：生活/工作/混合（仅影响默认标签）
2. 自动创建“本月版本”
3. 展示一个引导：

   - “写下本月主题（可空）”
   - “写 3 个本月目标”
   - “开始收集 Inbox”

### 6.2 日常收集（10 秒）

- 主界面底部“+” → 输入一句话 → 选择标签（可跳过）→ 保存到 Inbox

### 6.3 每周/随时整理（2 分钟）

- Inbox 列表 → 多选 → 归档到“本月 Backlog”
- 或直接标 Done（例如“已完成的小事”）

### 6.4 月末复盘（5 分钟）

- 打开“复盘”Tab → 按模板填几句话 → 点击“生成 Release Notes” → 导出图片/PDF

---

## 7. 信息架构（IA）

底部 4 个 Tab（简单清晰）：

1. **本月**：主题、目标、Backlog、Done（一个页面分区）
2. **Inbox**：快速收集箱（支持筛选/搜索）
3. **复盘**：复盘问答 + 统计 + 导出
4. **设置**：备份/恢复、导出格式、标签管理、关于与隐私说明

---

## 8. 主要界面草图说明（文字版）

### 8.1 本月页

- 顶部：月份切换（< 2026-01 | 2026-02 | 2026-03 >）
- 卡片 1：主题（可空）
- 卡片 2：本月目标（最多 5 条，支持勾选“已达成”）
- 卡片 3：Backlog（可拖拽排序；左滑：标 Done；右滑：删除/归档）
- 卡片 4：Done（按时间倒序；可点开写一句亮点）

### 8.2 Inbox 页

- 顶部搜索框（v1 可选）
- 条目列表：一句话 + 标签 + 创建时间
- 底部操作：归档到本月 Backlog / 标 Done / 删除
- 归档弹窗：选择月份（默认本月）+ 选择状态（Backlog/Done）

### 8.3 复盘页

- 数据概览卡：Done 数、目标达成数、Top 标签
- 复盘问答卡：4 个问题（多行文本）
- 预览按钮：生成 Release Notes 预览（渲染为可滚动长图）
- 导出按钮：分享图片 / 导出 PDF

### 8.4 设置页

- 标签管理：增删改（预置 6 个）
- 备份：导出备份文件、从备份恢复
- 导出偏好：图片是否含封面、Done 是否显示备注
- 隐私说明：数据仅本地；不采集；不联网（除系统分享行为）

---

## 9. 数据模型（建议）

> 目标：结构稳定、方便演进、便于备份与迁移

### 9.1 实体

- **ReleaseMonth**
  - id: UUID
  - yearMonth: String（如 "2026-02"）
  - theme: String?
  - goals: [Goal]（或内联数组）
  - retro: Retro（或字段内联）
  - createdAt, updatedAt

- **Item**
  - id: UUID
  - text: String
  - tagId: UUID?
  - status: enum { inbox, backlog, done }
  - releaseMonthId: UUID?（inbox 可为空）
  - note: String?（Done 亮点/备注）
  - createdAt, updatedAt, doneAt?

- **Tag**
  - id: UUID
  - name: String
  - order: Int

- **Goal**
  - id: UUID
  - text: String
  - isAchieved: Bool

- **Retro**
  - rightThings: String
  - wrongThings: String
  - nextActions: String
  - oneLineSummary: String

### 9.2 备份格式

- 一个 JSON：包含 tags、releases、items
- 版本号字段：schemaVersion: Int（便于以后迁移）

---

## 10. 交互与细节要求（验收口径）

- 任何新增条目必须在 **1 秒内可见**（离线本地写入）
- Inbox 到 Backlog/Done 的归档操作：**不超过 2 次点击**
- 导出图片：必须包含
  - 月份标题
  - 主题（若空则隐藏该行）
  - 目标（含达成标记）
  - Done 列表（最多显示前 N 条，N 可配置，v1 默认 30；超过显示“+X more”）
  - 复盘一行总结（若空则隐藏）
- 所有删除操作必须二次确认或提供撤销（建议 Toast “撤销”）

---

## 11. 技术实现建议（给 Codex 的工程约束）

- UI：SwiftUI
- 本地存储：优先 SwiftData（iOS 17+）；若要兼容更低版本再用 CoreData
- 导出：
  - 图片：把 SwiftUI View 渲染为长图（分段渲染防内存峰值）
  - PDF：同一份渲染内容输出 PDF
- 备份与恢复：用 UIDocumentPicker / FileManager
- 不接入任何三方 SDK
- 最低系统版本建议：iOS 17（能大幅降低维护成本）；若你更在意覆盖面，可降到 iOS 16，但复杂度会上升

---

## 12. 商业化（可选，但建议从 v1 就定）

- **一次性买断**（最简单、维护成本最低）
- 或 **免费 + Pro 解锁**：
  - Pro：无限导出模板/自定义导出、历史月份无限、更多标签、PDF 导出
  - 免费：仅最近 3 个月、标签最多 6 个、仅图片导出

> 你提到你会做上架操作：一次性买断最省事；订阅的客服/账务解释成本更高。

---

## 13. 后续每月版本更新的路线图（先给 6 个月，便于按月迭代）

> 每次更新都尽量是“可独立交付的小增强”，不引入服务端依赖

- **v1.1（下个月）**：小组件 & 锁屏组件（显示本月 Done 数 / 今日收集数），支持一键快速收集
- **v1.2**：快捷指令（Shortcuts）：新增 Inbox、标 Done、导出本月
- **v1.3**：模板库（常用目标/复盘模板），一键套用
- **v1.4**：搜索与过滤（按标签/状态/月份），以及 Done 的“亮点”聚合页
- **v1.5**：轻量“周回顾”（从本月里切出周视图，不改变底层结构）
- **v1.6**：导出主题皮肤（3 套排版模板），支持自定义封面标题

---

## 14. 交付物清单（给 Codex 的实现目标）

1. iOS SwiftUI 项目骨架（4 Tab）
2. SwiftData/CoreData 数据模型 + 基础 CRUD
3. Inbox 收集 + 归档到月份
4. 本月页：目标、Backlog、Done 列表与状态流转
5. 复盘页：问答存储 + 统计
6. Release Notes 渲染页 + 导出图片/PDF + 系统分享
7. 设置页：标签管理、备份导出与恢复、隐私说明
8. 基础本地化（中文/英文，v1 可只做中文，但建议从结构上可扩展）
